---
title: "Основы обработки данных с помощью R и Dplyr"
author: "artogal@yandex.ru"
format: 
  md:
    output-file: README.md
---

## Цель работы

1.  Развить практические навыки использования языка программирования R для обработки данных
2.  Закрепить знания базовых типов данных языка R
3.  Развить практические навыки использования функций обработки данных пакета `dplyr` – функции `select(), filter(), mutate(), arrange(), group_by()`

## Исходные данные

1.  Компьютер
2.  ОС Windows
3.  Rstudio
4.  Библиотека dply
5.  Пакет nycflights13
6.  Github

## План

1.  Установка пакета данных nycflights13

2.  Выполнить аталитические задачи с помощью языка R

## Шаги

```{r}
print(sessionInfo())
```

### Шаг 1. Проанализировать встроенные в пакет nycflights13 наборы данных с помощью

языка R.

```{r}
library(nycflights13)
```

```{r}
library(dplyr)
```

### Шаг 2. Ответить на вопросы.

| 1. Сколько встроенных в пакет nycflights13 датафреймов?

| В пакет nycflights13 встроено 5 датафреймов:
| flights — все рейсы, которые вылетели из Нью-Йорка в 2013 году;
| weather — ежечасные метеорологические данные для каждого аэропорта;
| planes — информация о конструкции каждого самолёта;
| airports — названия и расположение аэропортов;
| airlines — перевод двухбуквенных кодов перевозчиков в имена.

| 2. Сколько строк в каждом датафрейме?

```{r}
flights %>% nrow()
```

```{r}
weather %>% nrow()
```

```{r}
planes %>% nrow()
```

```{r}
airports %>% nrow()
```

```{r}
airlines %>% nrow()
```

| 3. Сколько столбцов в каждом датафрейме?

```{r}
flights %>% ncol()
```

```{r}
weather %>% ncol()
```

```{r}
planes %>% ncol()
```

```{r}
airports %>% ncol()
```

```{r}
airlines %>% ncol()
```

| 4. Как просмотреть примерный вид датафрейма?

```{r}
flights %>% glimpse()
```

```{r}
weather %>% glimpse()
```

```{r}
planes %>% glimpse()
```

```{r}
airports %>% glimpse()
```

```{r}
airlines %>% glimpse()
```

| 5. Cколько компаний-перевозчиков (carrier) учитывают эти наборы данных (представлено в наборах данных)?

```{r}
length(unique(airlines$carrier))
```

| 6. Сколько рейсов принял аэропорт John F Kennedy Intl в мае?

```{r}
flights %>% filter(month == 5 & origin == "JFK") %>% nrow()
```

| 7.Какой самый северный аэропорт?

```{r}
airports %>% arrange(desc(lat)) %>% slice(1)
```

| 8. Какой аэропорт самый высокогорный (находится выше всех над уровнем моря)?

```{r}
airports %>% arrange(desc(alt)) %>% slice(1)
```

| 9. Какие бортовые номера у самых старых самолетов?

```{r}
planes %>% arrange(year) %>% slice(1) %>% select(tailnum)
```

| 10. Какая средняя температура воздуха была в сентябре в аэропорту John FKennedy Intl (в градусах Цельсия).

```{r}
weatherSeptF<-weather %>% filter(!is.na(temp) & month == 9 & origin == 'JFK') %>%  summarize(ср=mean(temp))
weatherSeptC<-(5/9)*(weatherSeptF-32)
weatherSeptC
```

| 11. Самолеты какой авиакомпании совершили больше всего вылетов в июне?

```{r}
air<- flights %>% filter(!is.na(carrier) & month == 6 & !is.na(month)) %>% group_by(carrier) %>% summarise("coun"=n()) %>% arrange(desc(coun)) %>% slice(1) %>% select(carrier)
airlines %>% filter(carrier == air$carrier) %>% select(name)
```

| 12. Самолеты какой авиакомпании задерживались чаще других в 2013 году?

```{4}
flights %>%
  filter(year == 2013 & !is.na(dep_delay) & !is.na(arr_delay)) %>%
  group_by(carrier) %>%
  summarise(coun = sum(arr_delay > 0)) %>%
  slice_max(coun, n = 1) %>%
  left_join(airlines) %>%
  pull(name)
```

## Оценка результата

1.  Получены практические навыки использования языка программирования R для обработки данных

2.  Закреплены знания базовых типов данных языка R

3.  Получены практические навыки использования функций обработки данных пакета dplyr

## Вывод

В результате выполнения работы были закреплены умения работы с основными инструментами обработки данных пакета dplyr языка R.
